:revealjsdir: ../../../node_modules/.pnpm/reveal.js@4.5.0/node_modules/reveal.js
:revealjs_slideNumber: true
:sectnums:

// Copyright (C) 2020 - present Juergen Zimmermann, Hochschule Karlsruhe
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <https://www.gnu.org/licenses/>.

// https://asciidoctor.org/docs/asciidoctor-revealjs

= Beispiel mit Nest, REST, GraphQL, Prisma, Keycloak und Vitest

Jürgen Zimmermann <Juergen.Zimmermann@h-ka.de>

== Gliederung

* Werkzeuge
* Nest und REST
* Nest und GraphQL
* Prisma
* Security, Keycloak und OIDC
* Vitest und fetch
* OpenAPI durch Swagger

== Werkzeuge

* Infrastruktur
* Entwicklungsumgebung
* CI und Deployment
* Dokumentation

=== Infrastruktur

* pnpm
* node_modules

=== Entwicklungsumgebung

* VS Code
* TypeScript und ES 2015+
* ESLint und SonarQube
* Prettier
* Bruno

=== CI und Deployment

* Dockerfile
* Docker Compose
* Continuous Integration (CI) durch GitHub Actions oder Jenkins

=== Dokumentation

* AsciiDoctor mit PlantUML
* reveal.js

== Nest und REST

* Controller mit `@Controller()` usw.
* Services durch `@Injectable()`
* Guards für Security
* Middleware, z.B. `RequestLoggerMiddleware`
* Interceptor, z.B. für Antwortzeit und Statuscode
* `@Module()` für Dependency Injection
* Bruno

=== Decorator für die Controller-Klasse

* `@Controller()`
* `@UseGuards()`
* `@UseInterceptors()`

=== Decorator für die Controller-Methoden

* `@Get()`, `@Post()`, `@Put()`, `@Delete()`
* `@Param()`, `@Query()`
* `@Req()`, `@Res()`, `@Body()`, `@Header()`
* `@Roles()`

== Nest und GraphQL

* Wrapper für Apollo Server
* Schema-Definition mit Typen, Query und Mutation
* Resolver mit `@Resolver()`, `@Query()`, `@Mutation()`, `@Args()`
* Bruno

== Prisma

* OR-Mapping
* Schema
* Generierter Client einschl. Entity-Klassen
* findUnique(), findMany(), include
* Pagination, WhereBuilder
* $transaction mit Arrow-Function, create(), update(), delete()

== Security, Keycloak und OIDC

* JWT
  - Header: alg (z.B. RS256), typ
  - Payload: iat (issued at), exp (expiration), iss (issuer)
  - Signature
* Integration mit Keycloak von Red Hat
  - @Roles()
  - @Public()

== Vitest und fetch

* Vitest als Test-Framework
* fetch() für HTTP-Requests bei Integrationstests

== OpenAPI durch Swagger

* Wrapper durch Nest
* @Api...() einschl. `@ApiBearerAuth()`
* Button _Try it out_
