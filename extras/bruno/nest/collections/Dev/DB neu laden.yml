info:
  name: DB neu laden
  type: http
  seq: 1

http:
  method: POST
  url: "{{baseUrl}}/dev/db_populate"
  auth:
    type: oauth2
    flow: resource_owner_password_credentials
    accessTokenUrl: "{{oidcTokenUrl}}"
    credentials:
      clientId: "{{clientId}}"
      clientSecret: "{{clientSecret}}"
      placement: body
    resourceOwner:
      username: "{{username}}"
      password: "{{password}}"
    tokenConfig:
      id: credentials
      placement:
        header: Bearer
    settings:
      autoFetchToken: true
      autoRefreshToken: false

runtime:
  assertions:
    - expression: res.status
      operator: eq
      value: "200"
    - expression: res.headers['content-type']
      operator: matches
      value: ^application\/json(; charset=utf-8)?
    - expression: res.body.db_populate
      operator: eq
      value: ok

settings:
  encodeUrl: true
  timeout: 0
  followRedirects: true
  maxRedirects: 5
